{% extends 'base.html' %}
{% block body %}
{% load static %}

<section id="listing_products">
    <div class="jumbotron jumbotron-fluid text-center container-login100">
        <div class="container">
            <h1 class="display-1"> Product Listing </h1>
            {% if user.profile.usertype == 'User' %}
                <p class="lead">Browse for products and make your cart!</p>
            {% else %}
                <p class="lead">Manage your inventory</p>
            {% endif %}
            <br/><br/>
            <a href="#listings" class="p-3 hrv-glow bg-white" style="border-radius: 50%;">
                <i class="fas fa-chevron-down p-2"></i>
            </a>
        </div>
    </div>
    
    <div class="container-fluid p-5" id="listings">
        <div class="container-fluid d-flex my-4 mx-auto justify-content-between">
            <span class="display-4 text-capitalize" style="font-size: 2em !important;">Welcome, <strong>{{user.username}}</strong></span>
            {% if user.profile.usertype == 'Admin' %}
            <a class='btn float-right btn-info hvr-wobble-vertical' style="border-radius: 50%;" href="{% url 'add_item' %}" title="Add a new product!">
                <i class="fas fa-plus"></i>
            </a>
            {% endif %}
        </div>
        
        <div class="row container-fluid border border-primary rounded shadow p-5 my-5">
        {% for product in products %}
        <div class="col-lg-5 col-sm-12 col-md-5 mx-auto my-5 p-3 rounded border border-primary">
            <small >
                {{forloop.counter}}
            </small>
            <div class="row px-4">
                <div class="text-center col-lg-6 col-md-6 col-sm-12 py-3 px-4">
                    <img src={{product.product_image.url}} style="height: 100px; width: 100px;" alt={{product.product_name}}/>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12 pt-1 px-4 text-right magic-border">
                    <h5 class="display-4 text-capitalize" style="font-size: 1.4em !important; font-weight: 400;">{{product.product_name}}</h5>
                    <label><small>Price-per-unit:</small></label>
                    <strong>Rs. {{product.product_price}} / unit</strong>
                    <br/>
                    <label><small>Available Quantity:</small></label>
                    <strong>{{product.product_quantity}}</strong>
                    <div class="mt-1">
                        {% if user.profile.usertype == 'User' %}
                        <button 
                            id = "btn_{{product.pk}}"
                            data-product="{{product.pk}}" 
                            data-action="cart_add"
                            class="btn btn-outline-success rounded shadow update-cart hvr-float" 
                            title="Add to your cart"
                        >
                            Add to Cart
                        </button>
                        {% else %}
                        <a 
                            href="{% url 'edit_item' product.pk %}"
                            title="Edit this item!"
                            class="btn btn-outline-info rounded hvr-float" 
                        >
                        <i class="fas fa-pen"></i>
                        </a>
                        <a 
                            href="{% url 'delete_item' product.pk %}"
                            title="Delete this item!"
                            class="btn btn-outline-danger rounded hvr-float" 
                        >
                            <i class="fas fa-trash"></i>
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
        </div>
    </div>
    
    
</section>
{% endblock %}
